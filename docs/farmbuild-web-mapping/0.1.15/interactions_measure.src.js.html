<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>interactions/measure.src.js - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-webmapping.html">webmapping</a><ul class='methods'><li data-type='method'><a href="module-webmapping.html#.create">create</a></li><li data-type='method'><a href="module-webmapping.html#.find">find</a></li><li data-type='method'><a href="module-webmapping.html#.load">load</a></li><li data-type='method'><a href="module-webmapping.html#.save">save</a></li><li data-type='method'><a href="module-webmapping.html#~export">export</a></li></ul></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">interactions/measure.src.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>'use strict';

angular.module('farmbuild.webmapping')
    .factory('webMappingMeasureInteraction',
    function (validations,
              webMappingMeasurement,
              $log) {
        var _isDefined = validations.isDefined,
            _measurement = webMappingMeasurement,
            _value, _type;

        function _create(map, type) {
            _type = type;
            /**
             * Currently drawn feature.
             * @type {ol.Feature}
             */
            var sketch,

                source = new ol.source.Vector(),

                drawInteraction = new ol.interaction.Draw({
                    source: source,
                    type: /** @type {ol.geom.GeometryType} */ (type),
                    style: new ol.style.Style({
                        fill: new ol.style.Fill({
                            color: 'rgba(255, 255, 255, 0.2)'
                        }),
                        stroke: new ol.style.Stroke({
                            color: 'rgba(0, 0, 0, 0.5)',
                            lineDash: [10, 10],
                            width: 2
                        }),
                        image: new ol.style.Circle({
                            radius: 5,
                            stroke: new ol.style.Stroke({
                                color: 'rgba(0, 0, 0, 0.7)'
                            }),
                            fill: new ol.style.Fill({
                                color: 'rgba(255, 255, 255, 0.2)'
                            })
                        })
                    })
                });

            drawInteraction.on('drawstart',
                function (evt) {
                    // set sketch
                    sketch = evt.feature;
                }, this);

            drawInteraction.on('drawend',
                function (evt) {
                    // unset sketch
                    sketch = null;
                }, this);


            /**
             * Handle pointer move.
             * @param {ol.MapBrowserEvent} evt
             */
            function onPointerMove(evt) {
                if (evt.dragging || !sketch) {
                    return;
                }
                if(_type === 'Polygon') {
                    _value =  _measurement.area(sketch);
                } else {
                    _value =  _measurement.length(sketch);
                }
            };

            function _getValue() {
                return _value;
            };


            map.addInteraction(drawInteraction);
            drawInteraction.setActive(true);
            map.on('pointermove', onPointerMove);

            return {
                getValue: _getValue,
                interaction: drawInteraction
            }

        };

        return {
            create: _create
        }

    });</code></pre>
        </article>
    </section>




</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.0</a> on Sun May 31 2015 22:01:31 GMT+1000 (AEST) using the Minami theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>
