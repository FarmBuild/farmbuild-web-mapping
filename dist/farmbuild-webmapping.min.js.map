{"version":3,"file":"dist/farmbuild-webmapping.min.js","sources":["dist/farmbuild-webmapping.js"],"names":["angular","module","factory","farmdata","validations","$log","webMappingSession","_fromFarmData","farmData","info","farm","geometry","paddocks","_isDefined","forEach","val","push","type","features","undefined","_toFarmData","farmGeometry","data","createDefault","_load","loaded","load","hasOwnProperty","webMapping","update","_exportFarmData","toExport","webmapping","isDefined","exportFarmData","version","window","farmbuild","openlayersDraw","googlemapslayer","_init","targetElementId","layerSelectionElementId","paddocksGeometry","isNew","_targetElementId","_layerSelectionElementId","_isNew","_map","setTarget","_layerSelectionElement","document","getElementById","proj4","defs","projection","ol","proj","get","code","_view","View","rotation","maxZoom","_paddocksSource","source","Vector","format","GeoJSON","readFeatures","dataProjection","featureProjection","_farmSource","_paddocksLayer","layer","style","Style","fill","Fill","color","stroke","Stroke","width","_farmLayer","Map","layers","target","view","interactions","interaction","defaults","altShiftDragRotate","dragPan","rotate","mouseWheelZoom","extend","DragPan","kinetic","controls","control","attributionOptions","collapsible","ZoomToExtent","extent","getExtent","ScaleLine","_size","getSize","addEventListener","value","init","map","_transform","latLng","sourceProjection","destinationProjection","transformed","transform","google","maps","LatLng","_exportGeometry","writeFeatures","getSource","getFeatures","e","JSON","stringify","_clear","clear","_integrateGMap","gmap","on","center","getCenter","getProjection","_projection","setCenter","setZoom","getZoom","onresize","event","trigger","ControlPosition","TOP_LEFT","_targetEl","parentNode","removeChild","centerNew","zoomNew","fitExtent","_getProjection","_center","coordinates","paddocksSource","exportGeometry","integrateGMap","paddocksLayer","farmLayer","root","session","find","save","toSave","dateLastUpdated","Date","error","saveSection","section","loadSection","isLoadFlagSet","location","href","split","length","indexOf","openLayers","autocomplete","places","Autocomplete","componentRestrictions","countryRestrict","addListener","_onPlaceChanged","place","getPlace","lng","lat","googleMapProjection","openLayerProjection","centerPoint","country","disableDefaultUI","keyboardShortcuts","draggable","disableDoubleClickZoom","scrollwheel","streetViewControl","mapTypeId","MapTypeId","SATELLITE","MERGE","REMOVE","CLIP","AREA","_merge","merged","featuresToMerge","_select","getArray","_removeFeatures","_layer","fromJson","turf","merge","_source","addFeature","Feature","geom","Polygon","_clip","clippee","clipper","erase","_clipAdd","removeFeature","item","featureToClip","layerFeatures","clipped","layerFeature","writeFeature","_area","olFeatures","area","feature","_remove","featuresToRemove","_draw","_modify","_snap","_removeInteractions","getInteractions","addInteraction","selectedLayer","evt","activeLayer","modify","disable","draw","getFeaturesAtCoordinate","coordinate","enable","setEvents","_enable","setActive","_disable","selectedFeatures","remove","Select","addCondition","events","condition","shiftKeyOnly","Modify","Draw","Snap","clip","run","injector"],"mappings":"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"}