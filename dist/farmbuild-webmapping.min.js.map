{"version":3,"file":"dist/farmbuild-webmapping.min.js","sources":["dist/farmbuild-webmapping.js"],"names":["angular","module","factory","farmdata","validations","$log","geoJsonValidator","farmdataConverter","webMappingSession","webMappingProjections","webMappingInteractions","webMappingMeasurement","webMappingPaddocks","webMappingOpenLayersHelper","webMappingGoogleAddressSearch","webMappingGoogleAnalytics","webMappingParcels","info","session","isDefined","webMapping","validator","toGeoJsons","actions","paddocks","olHelper","ga","parcels","measurement","load","find","save","geoJsons","farmData","export","create","version","window","farmbuild","webmapping","$rootScope","_create","map","farmSource","paddocksSource","_init","clipFn","selectInteraction","addInteraction","drawInteraction","setActive","on","e","feature","setTimeout","removeFeature","drawingStatus","$broadcast","event","interaction","getFeatures","clear","_enable","_disable","_finish","finishDrawing","_isDrawing","_discard","ol","Draw","source","type","init","enable","disable","isDrawing","finish","discard","webMappingSelectInteraction","webMappingModifyInteraction","webMappingDrawInteraction","webMappingSnapInteraction","webMappingTransformation","_destroy","_isDefined","_select","_modify","_snap","_draw","removeInteraction","destroy","undefined","_activeLayer","_activeLayerName","_mode","farmLayer","paddocksLayer","activeLayerName","multi","_farmLayer","_paddocksLayer","_map","_farmName","getSource","getProperties","name","_clip","_addFeature","layer","id","Date","getTime","setProperties","_id","addFeature","_clearSelections","_remove","features","deselect","forEach","featureToClip","paddockSource","_clipPaddocks","_clipDonut","_clipFarm","getGeometry","getExtent","Infinity","error","clipped","paddocksFeatures","farmFeatures","_transform","eraseAll","intersect","donutFeature","paddockFeature","getFeaturesInExtent","erase","merge","_merge","_selectedFeatures","_enableEditing","_enableDrawing","_enableDonutDrawing","_snapParcels","addFeatures","_finishDrawing","_discardDrawing","_isEditing","getLength","_disableSnapping","_enableSnapping","_showParcels","show","_hideParcels","hide","_enableKeyboardShortcuts","elementId","onKeyDown","selectedFeatures","keyCode","preventDefault","stopPropagation","item","element","document","getElementById","getTargetElement","addEventListener","$on","data","editing","isEditing","drawing","donut","snapping","selected","clip","remove","snap","keyboardShortcuts","_measureControl","button","createElement","innerHTML","letter","handleMeasure","getActive","className","baseCssClass","cssClass","appendChild","control","Control","call","this","target","options","Vector","style","Style","fill","Fill","color","stroke","Stroke","lineDash","width","image","Circle","radius","evt","value","_measurement","area","unit","length","getElementsByClassName","inherits","select","modifyInteraction","Modify","selectConfig","layers","addCondition","events","condition","shiftKeyOnly","never","toggleCondition","Select","snapInteraction","_addFeatures","parcel","snapVisibleLayer","removeLayer","_hide","setVisible","_show","Snap","title","addLayer","_openLayerFeatureToGeoJson","olFeature","dataProjection","featureProjection","_geoJSONFormat","writeFeatureObject","_areas","turf","_area","_length","lineDistance","format","areas","webMappingMeasureInteraction","_transformToGoogleLatLng","latLng","destinationProjection","transformed","proj","transform","_googleProjection","google","maps","LatLng","_transformFromGoogleLatLng","lng","lat","_openLayersDefaultProjection","_exportGeometry","result","writeFeaturesObject","geometry","crs","properties","_clear","addControls","addControl","ZoomToExtent","extent","getLayers","ScaleLine","LayerSwitcher","tipLabel","_integrateGMap","gmap","view","getView","targetElement","center","getCenter","setCenter","setZoom","getZoom","onresize","trigger","defaults","centerNew","zoomNew","controls","ControlPosition","TOP_LEFT","push","parentNode","removeChild","fitExtent","getSize","_center","coordinates","paddocksGeometry","GeoJSON","readFeatures","farmGeometry","_reload","geoJson","dataProjectionCode","featureProjectionCode","farm","_openLayerFeaturesToGeoJson","olFeatures","_geoJsonToOpenLayerFeature","readFeature","_geoJsonToOpenLayerFeatures","_initAddressSearch","targetElementId","olmap","onPlaceChanged","exportGeometry","integrateGMap","reload","featureToGeoJson","featuresToGeoJson","geoJsonToFeature","geoJsonToFeatures","transformFromGoogleLatLng","transformToGoogleLatLng","initAddressSearch","_findByCoordinate","coordinate","vectorLayer","found","getFeaturesAtCoordinate","findByCoordinate","$http","_load","serviceUrl","extentDataProjection","responseProjection","config","params","service","request","typeName","outputFormat","format_options","srsname","bbox","join","method","url","success","status","supported","crsSupported","proj4","defs","projection","loaded","isLoadFlagSet","_eraseAll","clipee","clippers","clipeeGeoJson","clipper","clipperGeoJson","_erase","cliperGeoJson","_intersect","olFeature1","olFeature2","intersection","feature1","feature2","toMerge","onPlaceChangedCallback","places","autocomplete","Autocomplete","componentRestrictions","countryRestrict","addListener","_onPlaceChanged","place","getPlace","location","country","googleAnalytics","_trackWebMapping","clientName","track","api","trackWebMapping","run"],"mappings":"AAAA,YAEAA,SAAQC,OAAO,wBAA0B,iBAAkB,uBAAwBC,QAAQ,aAAc,SAASC,SAAUC,YAAaC,KAAMC,iBAAkBC,kBAAmBC,kBAAmBC,sBAAuBC,uBAAwBC,sBAAuBC,mBAAoBC,2BAA4BC,8BAA+BC,0BAA2BC,mBACnXX,KAAKY,KAAK,4BACV,IAAwCC,UAAvBd,YAAYe,UAAqBX,mBAAmBY,YACjEF,QAASA,QACTf,SAAUA,SACVkB,UAAWf,iBACXgB,WAAYf,kBAAkBe,WAC9BC,QAASb,uBACTc,SAAUZ,mBACVa,SAAUZ,2BACVa,GAAIX,0BACJY,QAASX,kBACTY,YAAajB,sBACbkB,KAAMX,QAAQW,KACdC,KAAMZ,QAAQY,KACdC,KAAM,SAASC,UACX,GAAIC,UAAWf,QAAQY,MACvB,OAAOZ,SAAQa,KAAKE,SAAUD,WAElCE,SAAUhB,QAAAA,UACViB,OAAQhC,SAASgC,OAUrB,OARAf,YAAWgB,QAAU,QACW,mBAArBC,QAAOC,UACdD,OAAOC,WACHC,WAAYnB,YAGhBiB,OAAOC,UAAUC,WAAanB,WAE3BA,aAKXpB,QAAQC,OAAO,wBAAwBC,QAAQ,4BAA6B,SAASE,YAAaC,KAAMmC,YAEpG,QAASC,SAAQC,IAAKC,WAAYC,gBAK9B,QAASC,OAAMC,OAAQC,mBACnB1C,KAAKY,KAAK,6BACVyB,IAAIM,eAAeC,iBACnBA,gBAAgBC,WAAU,GAC1BD,gBAAgBE,GAAG,UAAW,SAASC,GACnC/C,KAAKY,KAAK,eACV,IAAIoC,SAAUD,EAAEC,OAChBP,QAAOO,QAAST,eAAgBD,YAChCW,WAAW,WACPV,eAAeW,cAAcF,UAC9B,KACHG,eAAgB,EAChBhB,WAAWiB,WAAW,gBAE1BR,gBAAgBE,GAAG,YAAa,SAASO,OACrCrD,KAAKY,KAAK,kBACV8B,kBAAkBY,YAAYC,cAAcC,QAC5CL,eAAgB,IAGxB,QAASM,WACLb,gBAAgBC,WAAU,GAE9B,QAASa,YACLd,gBAAgBC,WAAU,GAE9B,QAASc,WACLf,gBAAgBgB,gBAEpB,QAASC,cACL,MAAOV,eAEX,QAASW,YACLX,eAAgB,EAChBO,WACAD,UAvCJ,GAAIb,iBAAkB,GAAImB,IAAGT,YAAYU,MACrCC,OAAQ1B,eACR2B,KAAM,YACNf,eAAgB,CAsCpB,QACIgB,KAAM3B,MACN4B,OAAQX,QACRY,QAASX,SACTJ,YAAaV,gBACb0B,UAAWT,WACXU,OAAQZ,QACRa,QAASV,UAlDA/D,YAAYe,SAqD7B,QACIgB,OAAQM,WAMhBzC,QAAQC,OAAO,wBAAwBC,QAAQ,yBAA0B,SAASE,YAAaC,KAAMyE,4BAA6BC,4BAA6BC,0BAA2BC,0BAA2BC,yBAA0B1C,YAE3O,QAAS2C,UAASzC,KACdrC,KAAKY,KAAK,mCACLmE,WAAWC,UAAaD,WAAWE,UAAaF,WAAWG,QAAWH,WAAWI,SAGtF9C,IAAI+C,kBAAkBJ,QAAQ1B,aAC9BjB,IAAI+C,kBAAkBH,QAAQ3B,aAC9BjB,IAAI+C,kBAAkBD,MAAM7B,aAC5B4B,MAAMG,QAAQhD,KACd2C,QAAUM,OACVL,QAAUK,OACVH,MAAQG,OACRJ,MAAQI,OACRC,aAAeD,OACfE,iBAAmBF,OACnBG,MAAQH,QAEZ,QAAS9C,OAAMH,IAAKqD,UAAWC,cAAeC,gBAAiBC,OAE3D,GADA7F,KAAKY,KAAK,yBACLmE,WAAWa,kBAAqBb,WAAW1C,MAAS0C,WAAWY,gBAAmBZ,WAAWW,WAAlG,CAMA,GAHAI,WAAaJ,UACbK,eAAiBJ,cACjBK,KAAO3D,IACiB,aAApBuD,gBACAL,aAAeI,kBACZ,CAAA,GAAwB,SAApBC,gBAIP,MAHAL,cAAeG,UACfO,UAAYV,aAAaW,YAAY3C,cAAc,GAAG4C,gBAAgBC,KAI1EpB,QAAUP,4BAA4B3C,OAAOO,IAAKkD,aAAcM,OAChEZ,QAAUP,4BAA4B5C,OAAOO,IAAK2C,SAClDG,MAAQR,0BAA0B7C,OAAOO,IAAKqD,UAAUQ,YAAaP,cAAcO,aACnFhB,MAAQN,0BAA0B9C,OAAOO,IAAKqD,UAAUQ,YAAaP,cAAcO,aACnFT,MAAQ,GACRD,iBAAmBI,gBACnBZ,QAAQb,OACRc,QAAQd,OACRgB,MAAMhB,KAAKkC,MAAOrB,SAClBE,MAAMf,QAEV,QAASmC,aAAYC,MAAOvD,QAASoD,KAAMI,IAClCzB,WAAW/B,WAGX+B,WAAWqB,QAERA,KADqB,SAArBZ,iBACOS,UAEA,YAAa,GAAIQ,OAAOC,WAGvC1D,QAAQ2D,eACJP,KAAMA,KACNQ,IAAKJ,KAETxG,KAAKY,KAAK,qBAAsBoC,SAChCuD,MAAML,YAAYW,WAAW7D,SAC7B8D,oBAEJ,QAASC,SAAQC,SAAUC,UAClBlC,WAAWkC,YACZA,UAAW,GAEfjH,KAAKY,KAAK,wBAAyBoG,UAC/BjC,WAAWiC,WACXA,SAASE,QAAQ,SAASlE,SACtBuC,aAAaW,YAAYhD,cAAcF,WAG3CiE,UACAH,mBAGR,QAAST,OAAMc,cAAeC,cAAe9E,YACzCtC,KAAKY,KAAK,uBAAwBuG,eACT,aAArB3B,kBAA8C,SAAVC,OAA8B,SAAVA,OACxD4B,cAAcF,cAAeC,cAAe9E,YAEvB,aAArBkD,kBAA6C,eAAVC,OACnC6B,WAAWH,eAEU,SAArB3B,kBACA+B,UAAUJ,cAAe7E,YAGjC,QAAS+E,eAAcF,cAAeC,cAAe9E,YACjD,GAAIA,WAAWiB,cAAc,GAAGiE,cAAcC,YAAY,KAAOC,EAAAA,EAE7D,WADA1H,MAAK2H,MAAM,oDAGfP,eAAclE,cAAciE,cAC5B,IAAIS,SAASC,iBAAmBT,cAAc7D,cAAeuE,aAAexF,WAAWiB,cAAe6C,KAAOe,cAAchB,gBAAgBC,KAAMI,GAAKW,cAAchB,gBAAgBS,GACpLgB,SAAUG,WAAWC,SAASb,cAAeU,kBAC7CD,QAAUG,WAAWE,UAAUL,QAASE,aAAa,IACrDxB,YAAYf,aAAcqC,QAASxB,KAAMI,IAE7C,QAASc,YAAWY,cAChB,GAAI9B,MAAMI,GAAI2B,eAAiB5C,aAAaW,YAAYkC,oBAAoBF,aAAaV,cAAcC,aAAa,GAAIG,QAAUG,WAAWM,MAAMF,eAAgBD,aACnK,OAAKnD,YAAWoD,iBAIhB/B,KAAO+B,eAAehC,gBAAgBC,KACtCI,GAAK2B,eAAehC,gBAAgBS,SAChC7B,WAAW6C,WACXtB,YAAYf,aAAcqC,QAASxB,KAAMI,IACzCjB,aAAaW,YAAYhD,cAAciF,uBAPvCnI,MAAK2H,MAAM,kCAUnB,QAASJ,WAAUJ,cAAe7E,YAC9B,GAA6B8D,MAAzBwB,QAAUT,aACV7E,YAAWiB,cAAc,KACzB6C,KAAO9D,WAAWiB,cAAc,GAAG4C,gBAAgBC,MAEnD9D,WAAWiB,cAAc,IAAMjB,WAAWiB,cAAc,GAAGiE,cAAcC,YAAY,KAAOC,EAAAA,IAC5FE,QAAUG,WAAWM,MAAMlB,cAAe7E,WAAWiB,cAAc,IACnE+C,YAAYf,aAAcqC,QAASxB,MACnCwB,QAAUG,WAAWO,MAAMhG,WAAWiB,gBAE1CwD,QAAQzE,WAAWiB,eAAe,GAClC+C,YAAYf,aAAcqC,QAASxB,MACnCU,mBAEJ,QAASyB,QAAOvB,UACZhH,KAAKY,KAAK,uBAAwBoG,UAClCD,QAAQC,UAAU,GAClBV,YAAYf,aAAcwC,WAAWO,MAAMtB,WAC3CF,mBAEJ,QAAS0B,qBACL,MAAKzD,YAAWC,UAAaD,WAAWC,QAAQ1B,cAGhDtD,KAAKY,KAAK,wBAAyBoE,QAAQ1B,YAAYC,eAChDyB,QAAQ1B,YAAYC,eAJ3B,OAMJ,QAASkF,kBACA1D,WAAWU,QAAoB,SAAVA,QAG1BzF,KAAKY,KAAK,mBACVoE,QAAQZ,SACRa,QAAQb,SACRc,MAAMd,SACNe,MAAMd,UACNoB,MAAQ,QAEZ,QAASiD,kBACA3D,WAAWU,QAAoB,SAAVA,QAG1BzF,KAAKY,KAAK,mBACVoE,QAAQX,UACRY,QAAQZ,UACRc,MAAMf,SACNc,MAAMd,SACNqB,MAAQ,QAEZ,QAASkD,uBACA5D,WAAWU,QAAoB,eAAVA,QAG1BzF,KAAKY,KAAK,yBACVoE,QAAQX,UACRY,QAAQZ,UACRc,MAAMf,SACNc,MAAMd,SACNqB,MAAQ,cAEZ,QAASmD,cAAatH,SAClB,MAAKyD,YAAWzD,UAAayD,WAAWG,WAIxCA,OAAM2D,YAAYvH,aAHdtB,MAAK2H,MAAM,2DAKnB,QAASb,oBACL9B,QAAQ1B,YAAYC,cAAcC,QAEtC,QAASK,cACL,MAAKkB,YAAWU,OAGTN,MAAMb,YAHb,OAKJ,QAASwE,kBACA/D,WAAWU,QAGhBN,MAAMZ,SAEV,QAASwE,mBACAhE,WAAWU,QAGhBN,MAAMX,UAEV,QAASwE,cACL,MAAKjE,YAAWU,OAGTT,QAAQ1B,YAAYC,cAAc0F,YAAc,EAHvD,OAKJ,QAASC,oBACL,MAAKnE,YAAWG,OAGTA,MAAMb,UAHb,OAKJ,QAAS8E,mBACL,MAAKpE,YAAWG,OAGTA,MAAMd,SAHb,OAKJ,QAASgF,gBACL,MAAKrE,YAAWG,OAGTA,MAAMmE,OAHb,OAKJ,QAASC,gBACL,MAAKvE,YAAWG,OAGTA,MAAMqE,OAHb,OAqBJ,QAASC,0BAAyBC,WAE9B,QAASC,WAAUrG,OACf,GAAIsG,kBAAmBnB,mBACvB,IAAKzD,WAAW4E,kBAGhB,MAAqB,KAAjBtG,MAAMuG,SAAkC,GAAjBvG,MAAMuG,SAC7B7C,QAAQ4C,kBACRtG,MAAMwG,iBACNxG,MAAMyG,mBACC,GAEU,IAAjBzG,MAAMuG,SACF/F,aACAiF,iBAEAzC,MAAMmC,oBAAoBuB,KAAK,GAAIhE,eAAeG,YAAaJ,WAAWI,aAE9E7C,MAAMwG,iBACNxG,MAAMyG,mBACC,GAEU,IAAjBzG,MAAMuG,SACNb,kBACA1F,MAAMwG,iBACNxG,MAAMyG,mBACC,GAJX,OAtBJ,GAAIE,SAAUC,SAASC,eAAeT,YAAczD,KAAKmE,kBA6BzDH,SAAQI,iBAAiB,UAAWV,WAtRxC,GAAwC1E,SAASC,QAASE,MAAOD,MAAOK,aAAcC,iBAAkBC,MAAOK,WAAYC,eAAgBC,KAA6CC,UAApLlB,WAAahF,YAAYe,UAAoHiH,WAAalD,wBAwR9J,OAhDA1C,YAAWkI,IAAI,4BAA6B,SAAShH,MAAOiH,MACnDvF,WAAWC,UAAaD,WAAWE,UAAaF,WAAWI,SAGhEH,QAAQX,UACRY,QAAQZ,UACRc,MAAMd,aAEVlC,WAAWkI,IAAI,0BAA2B,SAAShH,MAAOiH,MACjDvF,WAAWC,UAAaD,WAAWE,UAAaF,WAAWI,SAGhEH,QAAQZ,SACRa,QAAQb,SACRe,MAAMd,cAmCNF,KAAM3B,MACN6C,QAASP,SACTyF,SACInG,OAAQqE,eACR+B,UAAWxB,YAEfyB,SACIjG,QAASuE,gBACTxE,OAAQuE,eACR1E,OAAQsE,eACRpE,UAAWT,YAEf6G,OACItG,OAAQuE,qBAEZgC,UACIvG,OAAQ+E,gBACR9E,QAAS6E,kBAEblC,UACI4D,SAAUpC,kBACVqC,KAAMxE,MACNiC,MAAOC,OACPuC,OAAQ/D,SAEZzF,SACIyJ,KAAMnC,aACNS,KAAMD,aACNG,KAAMD,cAEV0B,mBACI5G,OAAQoF,6BAOpB7J,QAAQC,OAAO,wBAAwBC,QAAQ,+BAAgC,SAASE,YAAaO,sBAAuB6B,WAAYnC,MAEpI,QAASoC,SAAQC,IAAK6B,MAiDlB,QAAS+G,iBAAgB/G,MACrB,GAAIgH,QAASjB,SAASkB,cAAc,SACpCD,QAAOE,UAAYC,MACnB,IAAIC,eAAgB,SAASvI,GACzBH,gBAAgBC,WAAWD,gBAAgB2I,aAC3CvB,QAAQwB,UAAYC,aAAeC,SAAW,UAC9CvJ,WAAWiB,WAAW,6BAE1B8H,QAAOd,iBAAiB,QAASkB,eAAe,GAChDJ,OAAOd,iBAAiB,aAAckB,eAAe,EACrD,IAAItB,SAAUC,SAASkB,cAAc,MACrCnB,SAAQwB,UAAYC,aAAeC,SACnC1B,QAAQ2B,YAAYT,QACpBnH,GAAG6H,QAAQC,QAAQC,KAAKC,MACpB/B,QAASA,QACTgC,OAAQC,QAAQD,SA/DxB,GAuBIX,QAAQK,SAvBRzH,OAAS,GAAIF,IAAGE,OAAOiI,OAAUT,aAAe,sCAAuC7I,gBAAkB,GAAImB,IAAGT,YAAYU,MAC5HC,OAAQA,OACRC,KAAMA,KACNiI,MAAO,GAAIpI,IAAGoI,MAAMC,OAChBC,KAAM,GAAItI,IAAGoI,MAAMG,MACfC,MAAO,6BAEXC,OAAQ,GAAIzI,IAAGoI,MAAMM,QACjBF,MAAO,qBACPG,UAAY,GAAI,IAChBC,MAAO,IAEXC,MAAO,GAAI7I,IAAGoI,MAAMU,QAChBC,OAAQ,EACRN,OAAQ,GAAIzI,IAAGoI,MAAMM,QACjBF,MAAO,uBAEXF,KAAM,GAAItI,IAAGoI,MAAMG,MACfC,MAAO,mCAKDN,UA4CtB,OA3CY,WAAR/H,MACAmH,OAAS,IACTK,SAAW,SAEXL,OAAS,IACTK,SAAW,UAEf9I,gBAAgBE,GAAG,UAAW,SAASiK,KACvB,WAAR7I,KACA/B,WAAWiB,WAAW,2BAClB4J,MAAOC,aAAaC,KAAKH,IAAI/J,SAC7BmK,KAAM,aAGVhL,WAAWiB,WAAW,2BAClB4J,MAAOC,aAAaG,OAAOL,IAAI/J,SAC/BmK,KAAM,WAGdvK,gBAAgBC,WAAU,GAC1BoH,SAASoD,uBAAuB5B,aAAeC,UAAU,GAAGF,UAAYC,aAAeC,UACxFK,MACH1J,IAAIM,eAAeC,iBACnBA,gBAAgBC,WAAU,GAmB1BkB,GAAGuJ,SAASrC,gBAAiBlH,GAAG6H,QAAQC,SACjC,GAAIZ,iBAAgB/G,MArE/B,GAAwC+I,eAAvBlN,YAAYe,UAA0BR,sBAuEvD,QACIwB,OAAQM,WAMhBzC,QAAQC,OAAO,wBAAwBC,QAAQ,8BAA+B,SAASE,YAAaC,MAEhG,QAASoC,SAAQC,IAAKkL,QAIlB,QAAS/K,SACLxC,KAAKY,KAAK,+BACVyB,IAAIM,eAAe6K,mBACnBA,kBAAkB3K,WAAU,GAEhC,QAASY,WACL+J,kBAAkB3K,WAAU,GAEhC,QAASa,YACL8J,kBAAkB3K,WAAU,GAZhC,GAAI2K,mBAAoB,GAAIzJ,IAAGT,YAAYmK,QACvCzG,SAAUuG,OAAOjK,YAAYC,eAajC,QACIY,KAAM3B,MACN4B,OAAQX,QACRY,QAASX,SACTJ,YAAakK,mBApBJzN,YAAYe,SAuB7B,QACIgB,OAAQM,WAMhBzC,QAAQC,OAAO,wBAAwBC,QAAQ,8BAA+B,SAASE,YAAaC,MAEhG,QAASoC,SAAQC,IAAKkE,MAAOV,OAezB,QAASrD,SACLxC,KAAKY,KAAK,+BACVyB,IAAIM,eAAeD,mBACnBA,kBAAkBG,WAAU,GAEhC,QAASY,WACLf,kBAAkBG,WAAU,GAEhC,QAASa,YACLhB,kBAAkBG,WAAU,GAvB3BkC,WAAWc,SACZA,OAAQ,EAEZ,IAAI6H,eACA7H,MAAOA,MACP8H,QAAUpH,OAEVV,OACA6H,aAAaE,aAAe7J,GAAG8J,OAAOC,UAAUC,cAEhDL,aAAaE,aAAe7J,GAAG8J,OAAOC,UAAUE,MAChDN,aAAaO,gBAAkBlK,GAAG8J,OAAOC,UAAUE,MAEvD,IAAItL,mBAAoB,GAAIqB,IAAGT,YAAY4K,OAAOR,aAYlD,QACIvJ,KAAM3B,MACN4B,OAAQX,QACRY,QAASX,SACTJ,YAAaZ,mBA/BrB,GAAIqC,YAAahF,YAAYe,SAkC7B,QACIgB,OAAQM,WAMhBzC,QAAQC,OAAO,wBAAwBC,QAAQ,4BAA6B,SAASE,YAAaC,MAE9F,QAASoC,SAAQC,IAAKC,WAAYC,gBAS9B,QAASkB,WACL0K,gBAAgBtL,WAAU,GAE9B,QAASa,YACLyK,gBAAgBtL,WAAU,GAa9B,QAASuL,cAAa9M,SAClBA,QAAQ4F,QAAQ,SAASmH,QACrBF,gBAAgBtH,WAAWwH,UAE/BC,iBAAiBpI,YAAY2C,YAAYvH,SAE7C,QAASkB,SACLxC,KAAKY,KAAK,6BACVyB,IAAIM,eAAewL,iBACnBA,gBAAgBtL,WAAU,GAE9B,QAASiC,UAASzC,KACd,MAAK0C,YAAW1C,MAIhBA,IAAIkM,YAAYD,sBAChBjM,KAAI+C,kBAAkB+I,sBAJlBnO,MAAK2H,MAAM,uEAMnB,QAAS6G,SACLF,iBAAiBG,YAAW,GAEhC,QAASC,SACLJ,iBAAiBG,YAAW,GAhDhC,IAAK1J,WAAW1C,OAAS0C,WAAWzC,cAAgByC,WAAWxC,gBAE3D,WADAvC,MAAK2H,MAAM,qFAGf,IAEI2G,kBAFAH,gBAAkB,GAAIpK,IAAGT,YAAYqL,MACrC1K,OAAQ1B,gBA6CZ,OA3CA4L,iBAAgBtH,WAAWvE,WAAWiB,cAAc,IAOpD+K,iBAAmB,GAAIvK,IAAGwC,MAAM2F,QAC5BjI,OAAQ,GAAIF,IAAGE,OAAOiI,OACtB0C,MAAO,UACPzC,MAAO,GAAIpI,IAAGoI,MAAMC,OAChBI,OAAQ,GAAIzI,IAAGoI,MAAMM,QACjBF,MAAO,uBACPI,MAAO,QAInBtK,IAAIwM,SAASP,mBA2BTnK,KAAM3B,MACN4B,OAAQX,QACRY,QAASX,SACTmF,YAAauF,aACb9K,YAAa6K,gBACb9I,QAASP,SACTyE,KAAMiF,MACNnF,KAAMqF,OA5Dd,GAAI3J,YAAahF,YAAYe,SA+D7B,QACIgB,OAAQM,WAMhBzC,QAAQC,OAAO,wBAAwBC,QAAQ,wBAAyB,SAASE,YAAaC,MAE1F,QAAS8O,4BAA2BC,UAAWC,eAAgBC,mBAC3D,MAAKlK,YAAWgK,YAGhB/O,KAAKY,KAAK,8CAA+CmO,WAClDG,eAAeC,mBAAmBJ,WACrCC,eAAgBA,eAChBC,kBAAmBA,qBANvB,OASJ,QAASG,QAAOpI,UAEZ,MADAhH,MAAKY,KAAK,mCAAoCoG,UACjB,KAAtBqI,KAAKnC,KAAKlG,UAErB,QAASsI,OAAMtM,SACXhD,KAAKY,KAAK,kCAAmCoC,QAC7C,IAAIA,SAAU8L,2BAA2B9L,QAAS,YAAa,YAC/D,OAA4B,MAArBqM,KAAKnC,KAAKlK,SAErB,QAASuM,SAAQvM,SACbhD,KAAKY,KAAK,iCAAkCoC,QAC5C,IAAIA,SAAU8L,2BAA2B9L,QAAS,YAAa,YAC/D,OAAkD,KAA3CqM,KAAKG,aAAaxM,QAAS,cAvBtC,GAAI+B,YAAahF,YAAYe,UAAWoO,eAAiB,GAAInL,IAAG0L,OAAgB,OAyBhF,QACIvC,KAAMoC,MACNI,MAAON,OACPhC,OAAQmC,WAMhB5P,QAAQC,OAAO,wBAAwBC,QAAQ,6BAA8B,SAASE,YAAa4P,6BAA8BlP,8BAA+BT,MAE5J,QAAS4P,0BAAyBC,OAAQC,uBACtC,GAAK/K,WAAW8K,SAAY9K,WAAW+K,uBAAvC,CAGA,GAAIC,aAAchM,GAAGiM,KAAKC,UAAUJ,OAAQK,kBAAmBJ,sBAC/D,OAAO,IAAIK,QAAOC,KAAKC,OAAON,YAAY,GAAIA,YAAY,KAE9D,QAASO,4BAA2BT,QAChC,MAAK9K,YAAW8K,QAGT9L,GAAGiM,KAAKC,WAAYJ,OAAOU,MAAOV,OAAOW,OAASC,6BAA8BP,mBAHvF,OAKJ,QAASQ,iBAAgBzM,OAAQ+K,eAAgBC,mBAC7C,GAAKlK,WAAWd,QAAhB,CAGA,GAAIwL,QAAS,GAAI1L,IAAG0L,OAAgB,OACpC,KACI,GAAIkB,QAASlB,OAAOmB,oBAAoB3M,OAAOV,eAC3CyL,eAAgBA,eAChBC,kBAAmBA,mBASvB,OAPAtP,SAAQuH,QAAQyJ,OAAO3J,SAAU,SAAShE,SACtCA,QAAQ6N,SAASC,KACbC,YACI3K,KAAM4I,mBAIX2B,OACT,MAAO5N,GACL/C,KAAK2H,MAAM5E,KAGnB,QAASiO,QAAO1O,WAAYC,gBACnBwC,WAAWzC,aAAgByC,WAAWxC,kBAG3CvC,KAAKY,KAAK,uBACV2B,eAAeiB,QACflB,WAAWkB,SAEf,QAASyN,aAAY5O,KACjBA,IAAI6O,WAAW,GAAInN,IAAG6H,QAAQuF,cAC1BC,OAAQ/O,IAAIgP,YAAYtH,KAAK,GAAG7D,YAAYuB,eAEhDpF,IAAI6O,WAAW,GAAInN,IAAG6H,QAAQ0F,WAC9BjP,IAAI6O,WAAW,GAAIvB,8BAA6B7N,OAAOO,IAAK,YAC5DA,IAAI6O,WAAW,GAAIvB,8BAA6B7N,OAAOO,IAAK,eAC5DA,IAAI6O,WAAW,GAAInN,IAAG6H,QAAQ2F,eAC1BC,SAAU,aAGlB,QAASC,gBAAeC,KAAMrP,IAAK2M,gBAC/B,GAAKjK,WAAW2M,OAAU3M,WAAW1C,MAAS0C,WAAWiK,gBAAzD,CAGAhP,KAAKY,KAAK,6BACV,IAAI+Q,MAAOtP,IAAIuP,UAAWC,cAAgBxP,IAAI8H,kBAC9CwH,MAAK7O,GAAG,gBAAiB,WACrB,GAAIgP,QAAS/N,GAAGiM,KAAKC,UAAU0B,KAAKI,YAAa7B,kBAAmBlB,eACpE0C,MAAKM,UAAU,GAAI7B,QAAOC,KAAKC,OAAOyB,OAAO,GAAIA,OAAO,OAE5DH,KAAK7O,GAAG,oBAAqB,WACzB4O,KAAKO,QAAQN,KAAKO,aAEtBlQ,OAAOmQ,SAAW,WACd,GAAIL,QAASlC,yBAAyB+B,KAAKI,YAAa/C,eACxDmB,QAAOC,KAAK/M,MAAM+O,QAAQV,KAAM,UAChCA,KAAKM,UAAUF,QAEnB,IAAIO,WACAC,WAAa,mBAAoB,mBACjCC,QAAS,GAETnB,OAAS/O,IAAIgP,YAAYtH,KAAK,GAAG7D,YAAYuB,WAEjD,IADAzH,KAAKY,KAAK,kBAAmBwQ,QACzBA,OAAO,KAAO1J,EAAAA,EAMd,MALAgK,MAAKc,SAASrC,OAAOC,KAAKqC,gBAAgBC,UAAUC,KAAKd,eACzDA,cAAce,WAAWC,YAAYhB,eACrCF,KAAKK,UAAUjO,GAAGiM,KAAKC,WAAYoC,SAASC,UAAU,GAAID,SAASC,UAAU,IAAMtD,eAAgBkB,oBACnGyB,KAAKM,QAAQI,SAASE,aACtBtB,aAAY5O,IAGhBqP,MAAKc,SAASrC,OAAOC,KAAKqC,gBAAgBC,UAAUC,KAAKd,eACzDA,cAAce,WAAWC,YAAYhB,eACrCZ,YAAY5O,KACZsP,KAAKmB,UAAU1B,OAAQ/O,IAAI0Q,YAE/B,QAASC,SAAQC,YAAa5Q,KACrB0C,WAAWkO,cAAiBlO,WAAW1C,OAG5CrC,KAAKY,KAAK,qBACVyB,IAAIuP,UAAUI,UAAUiB,aACxB5Q,IAAIuP,UAAUK,QAAQ,KAE1B,QAASlM,gBAAemN,iBAAkBlE,eAAgBC,mBACtD,GAAKlK,WAAWmO,mBAAsBnO,WAAWiK,iBAAoBjK,WAAWkK,mBAAhF,CAGAjP,KAAKY,KAAK,qCAAsCoO,eAAgBC,kBAChE,IAAI1M,gBAAiB,GAAIwB,IAAGE,OAAOiI,QAC/BlF,UAAU,GAAIjD,IAAG0L,OAAO0D,SAAUC,aAAaF,kBAC3ClE,eAAgBA,eAChBC,kBAAmBA,qBAG3B,OAAO,IAAIlL,IAAGwC,MAAM2F,QAChBjI,OAAQ1B,eACRqM,MAAO,WACPzC,MAAO,GAAIpI,IAAGoI,MAAMC,OAChBC,KAAM,GAAItI,IAAGoI,MAAMG,MACfC,MAAO,6BAEXC,OAAQ,GAAIzI,IAAGoI,MAAMM,QACjBF,MAAO,UACPI,MAAO,SAKvB,QAAS7G,YAAWuN,aAAcrE,eAAgBC,mBAC9C,GAAKlK,WAAWsO,eAAkBtO,WAAWiK,iBAAoBjK,WAAWkK,mBAA5E,CAGAjP,KAAKY,KAAK,iCAAkCoO,eAAgBC,kBAC5D,IAAI3M,YAAa,GAAIyB,IAAGE,OAAOiI,QAC3BlF,UAAU,GAAIjD,IAAG0L,OAAO0D,SAAUC,aAAaC,cAC3CrE,eAAgBA,eAChBC,kBAAmBA,qBAG3B,OAAO,IAAIlL,IAAGwC,MAAM2F,QAChBjI,OAAQ3B,WACRsM,MAAO,OACPzC,MAAO,GAAIpI,IAAGoI,MAAMC,OAChBC,KAAM,GAAItI,IAAGoI,MAAMG,MACfC,MAAO,2BAEXC,OAAQ,GAAIzI,IAAGoI,MAAMM,QACjBF,MAAO,UACPI,MAAO,SAKvB,QAAS2G,SAAQjR,IAAKkR,QAASC,mBAAoBC,uBAC/C,GAAI9F,QAAStL,IAAIgP,WACjB1D,QAAOnK,QACPnB,IAAIwM,SAAS9I,eAAewN,QAAQpS,SAAUqS,mBAAoBC,wBAClEpR,IAAIwM,SAAS/I,WAAWyN,QAAQG,KAAMF,mBAAoBC,wBAE9D,QAAS3E,4BAA2BC,UAAWC,eAAgBC,mBAC3D,MAAKlK,YAAWgK,YAGhB/O,KAAKY,KAAK,8CAA+CmO,WAClDG,eAAeC,mBAAmBJ,WACrCC,eAAgBA,eAChBC,kBAAmBA,qBANvB,OASJ,QAAS0E,6BAA4BC,WAAY5E,eAAgBC,mBAC7D,MAAKlK,YAAW6O,aAGhB5T,KAAKY,KAAK,8CAA+CgT,YAClD1E,eAAe0B,oBAAoBgD,YACtC5E,eAAgBA,eAChBC,kBAAmBA,qBANvB,OASJ,QAAS4E,4BAA2B7Q,QAASgM,eAAgBC,mBACzD,MAAKlK,YAAW/B,UAGhBhD,KAAKY,KAAK,sDAAuDoC,SAC1DkM,eAAe4E,YAAY9Q,SAC9BgM,eAAgBA,eAChBC,kBAAmBA,qBANvB,OASJ,QAAS8E,6BAA4B/M,SAAUgI,eAAgBC,mBAC3D,MAAKlK,YAAWiC,WAGhBhH,KAAKY,KAAK,uDAAwDoG,UAC3DkI,eAAekE,aAAapM,UAC/BgI,eAAgBA,eAChBC,kBAAmBA,qBANvB,OASJ,QAAS+E,oBAAmBC,gBAAiBC,OAKzC,QAASC,gBAAetE,QACpB,GAAIA,QAASS,2BAA2BT,OACxCmD,SAAQnD,OAAQqE,OANfnP,WAAWkP,kBAAqBlP,WAAWmP,SAGhDlU,KAAKY,KAAK,iCAAkCqT,iBAK5CxT,8BAA8B0D,KAAK8P,gBAAiBE,iBA7MxD,GAAIpP,YAAahF,YAAYe,UAAWoO,eAAiB,GAAInL,IAAG0L,OAAgB,QAAKS,kBAAoB,YAAaO,6BAA+B,WA+MrJ,QACI2D,eAAgB1D,gBAChBlN,MAAOwN,OACPc,OAAQkB,QACRqB,cAAe5C,eACf9L,cAAeI,eACfL,UAAWI,WACXwO,OAAQhB,QACRiB,iBAAkBzF,2BAClB0F,kBAAmBb,4BACnBc,iBAAkBZ,2BAClBa,kBAAmBX,4BACnBY,0BAA2BrE,2BAC3BsE,wBAAyBhF,yBACzBiF,kBAAmBb,sBAM3BrU,QAAQC,OAAO,wBAAwBC,QAAQ,qBAAsB,SAASG,KAAMD,aAEhF,QAAS+U,mBAAkBC,WAAYC,aACnC,GAAIC,MACJ,IAAKlQ,WAAWgQ,aAAgBhQ,WAAWiQ,aAA3C,CAGA,GAAI7T,UAAW6T,YAAY9O,YAAYgP,wBAAwBH,WAK/D,OAJI5T,WAAYA,SAASiM,OAAS,IAC9B6H,MAAQD,YAAY9O,YAAYgP,wBAAwBH,YAAY,IAExE/U,KAAKY,KAAK,+BAAgCmU,WAAYE,OAC/CA,OAXX,GAAIlQ,YAAahF,YAAYe,SAa7B,QACIqU,iBAAkBL,qBAM1BnV,QAAQC,OAAO,wBAAwBC,QAAQ,oBAAqB,SAASG,KAAMoV,MAAOrV,YAAaM,uBAAwBG,4BAE3H,QAAS6U,OAAMC,WAAYlE,OAAQmE,qBAAsBC,oBACrD,GAAIC,SACAC,QACIC,QAAS,MACT5T,QAAS,QACT6T,QAAS,aACTC,SAAU,oBACVC,aAAc,kBACdC,eAAgB,yBAChBC,QAASR,mBACTS,KAAM7E,OAAO8E,KAAK,KAAO,IAAMX,sBAGvC,OAAKxQ,YAAWuQ,aAAgBvQ,WAAWqM,SAAYrM,WAAWwQ,uBAA0BxQ,WAAWyQ,qBAIvGxV,KAAKY,KAAK,+CAAgDwQ,QACnDgE,OACHe,OAAQ,QACRC,IAAKd,WACLI,OAAQD,OAAOC,SAChBW,QAAQ,SAAS/L,KAAMgM,QACtBtW,KAAKY,KAAK,+BAAgC0V,OAAQhM,KAClD,IAAIsJ,YAAaxS,SAASsT,mBACtBxQ,KAAM,oBACN8C,SAAUsD,KAAKtD,UAEnB3G,wBAAuBiB,QAAQyJ,KAAK6I,cACrCjM,MAAM,SAAS2C,KAAMgM,QACpBtW,KAAK2H,MAAM,2BAA4B2O,OAAQhM,aAhB/CtK,MAAK2H,MAAM,sFAfnB,GAAI5C,YAAahF,YAAYe,UAAWM,SAAWZ,0BAkCnD,QACIgB,KAAM6T,SAMd1V,QAAQC,OAAO,wBAAwBC,QAAQ,wBAAyB,SAASG,KAAMF,UACnF,GAAIM,wBACAmW,UAAWtU,UAAUnC,SAAS0W,aAKlC,OAHA1W,UAAS0W,aAAatP,QAAQ,SAAS4J,KACnC2F,MAAMC,KAAK5F,IAAI1K,KAAM0K,IAAI6F,cAEtBvW,wBAKXT,QAAQC,OAAO,wBAAwBC,QAAQ,oBAAqB,SAASG,KAAMF,SAAUC,YAAaO,uBAEtG,QAASkB,MAAKI,UACV,GAAIgV,QAAS9W,SAAS0B,KAAKI,SAC3B,OAAKmD,YAAW6R,QAGThV,SAFI0D,OAKf,QAAS5D,MAAKE,SAAUD,UACpB,MAAKoD,YAAWnD,WAIhBA,SAASsL,KAAO5M,sBAAsBoP,MAAM/N,SAAS+R,MACrD9R,SAASwE,KAAOzE,SAAS+R,KAAK1M,SAAS,GAAG+J,WAAW3K,KAC9CtG,SAASwI,MAAM1G,SAAUD,eAL5B3B,MAAK2H,MAAM,0CAXnB,GAAIxH,sBAAwB4E,WAAahF,YAAYe,SA2BrD,OAnBAX,mBAAkBqB,KAAOA,KAUzBrB,kBAAkBuB,KAAOA,KACzBvB,kBAAkBqD,MAAQ1D,SAASe,QAAQ2C,MAC3CrD,kBAAkB0W,cAAgB/W,SAASe,QAAQgW,cACnD1W,kBAAkBsB,KAAO,WACrB,MAAO3B,UAASe,QAAQY,QAE5BtB,kBAAAA,UAA2B,SAAS8J,SAAUrI,SAAUD,UACpD,MAAO7B,UAASe,QAATf,UAAwBmK,SAAUvI,KAAKE,SAAUD,YAErDxB,oBAKXR,QAAQC,OAAO,wBAAwBC,QAAQ,2BAA4B,SAASE,YAAaS,2BAA4BR,MAEzH,QAAS8W,WAAUC,OAAQC,UACvB,GAAKjS,WAAWgS,SAAYhS,WAAWiS,UAAvC,CAGAhX,KAAKY,KAAK,kBAAmBmW,OAC7B,IAAIE,eAAgB7V,SAASmT,iBAAiBwC,OAS9C,OARAC,UAAS9P,QAAQ,SAASgQ,SACtB,GAAIC,gBAAiB/V,SAASmT,iBAAiB2C,QAC/C,KACID,cAAgB5H,KAAKhH,MAAM4O,cAAeE,gBAC5C,MAAOpU,GACL/C,KAAK2H,MAAM5E,MAGZ3B,SAASqT,iBAAiBwC,gBAErC,QAASG,QAAOL,OAAQG,SACpB,GAAKnS,WAAWgS,SAAYhS,WAAWmS,SAAvC,CAGAlX,KAAKY,KAAK,2BAA4BmW,OAAQG,QAC9C,IAA2GtP,SAAvGqP,cAAgB7V,SAASmT,iBAAiBwC,QAASM,cAAgBjW,SAASmT,iBAAiB2C,QACjG,KAEI,MADAtP,SAAUyH,KAAKhH,MAAM4O,cAAeI,eAC7BjW,SAASqT,iBAAiB7M,SACnC,MAAO7E,GACL/C,KAAK2H,MAAM5E,KAGnB,QAASuU,YAAWC,WAAYC,YAC5BxX,KAAKY,KAAK,uBAAwB2W,WAAYC,WAC9C,IAAwGC,cAApGC,SAAWtW,SAASmT,iBAAiBgD,YAAaI,SAAWvW,SAASmT,iBAAiBiD,WAC3F,KAEI,MADAC,cAAepI,KAAKpH,UAAUyP,SAAUC,UACjCvW,SAASqT,iBAAiBgD,cACnC,MAAO1U,GACL/C,KAAK2H,MAAM5E,IAGnB,QAASwF,QAAOqL,YACZ5T,KAAKY,KAAK,uBAAwBgT,WAClC,IAAI7C,YAAY6G,OAChBA,SAAUxW,SAASoT,kBAAkBZ,YACrC7C,YACI3K,KAAM,WAAY,GAAIK,OAAOC,UAEjC,KACI,MAAOtF,UAASqT,iBAAiBpF,KAAK/G,MAAMsP,SAAU7G,YACxD,MAAOhO,GACL/C,KAAK2H,MAAM5E,IAlDnB,GAAIgC,YAAahF,YAAYe,UAAWM,SAAWZ,0BAqDnD,QACIwH,SAAU8O,UACVzO,MAAO+O,OACPnP,UAAWqP,WACXhP,MAAOC,UAMf5I,QAAQC,OAAO,wBAAwBC,QAAQ,gCAAiC,SAASE,YAAaC,MAIlG,QAASwC,OAAMyR,gBAAiB4D,wBAC5B,IAAK9S,WAAWoL,UAAYpL,WAAWoL,OAAOC,QAAUrL,WAAWoL,OAAOC,KAAK0H,QAE3E,WADA9X,MAAK2H,MAAM,sHAGf,IAAK5C,WAAWkP,kBAAqBlP,WAAW8S,wBAAhD,CAGA,GAAIE,cAAe,GAAI5H,QAAOC,KAAK0H,OAAOE,aAAa/N,SAASC,eAAe+J,kBAC3EgE,sBAAuBC,iBAE3B/H,QAAOC,KAAK/M,MAAM8U,YAAYJ,aAAc,gBAAiB,WACzDK,gBAAgBL,aAAcF,2BAGtC,QAASO,iBAAgBL,aAAcF,wBACnC,GAAqChI,QAAjCwI,MAAQN,aAAaO,UACpBD,OAAMxH,WAGXhB,OAASwI,MAAMxH,SAAS0H,SACpBxT,WAAW8S,yBAA6D,kBAA3BA,yBAC7CA,uBAAuBhI,SAzB/B,GAAIqI,kBACAM,QAAS,MACVzT,WAAahF,YAAYe,SA0B5B,QACIqD,KAAM3B,SAMd7C,QAAQC,OAAO,wBAAwBC,QAAQ,4BAA6B,SAASG,KAAMD,YAAa0Y,iBAEpG,QAASC,kBAAiBC,YACtB,MAAK5T,YAAW4T,aAIhB3Y,KAAKY,KAAK,2DAA4D+X,gBACtEF,iBAAgBG,MAAMC,IAAKF,iBAJvB3Y,MAAK2H,MAAM,gCAHnB,GAAIkR,KAAM,uBAAwB9T,WAAahF,YAAYe,SAS3D,QACIgY,gBAAiBJ,oBAMzB/Y,QAAQC,OAAO,wBAAwBmZ,IAAI,SAAS7W"}